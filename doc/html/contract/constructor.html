<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Class template constructor</title>
<link rel="stylesheet" href="../doc/html/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="../index.html" title="Contract++ 0.3.490">
<link rel="up" href="../reference.html#header..home.lcaminiti.sandbox.dbcpp_sourceforge.boost-quickbook.doc.qbk.src.contract.constructor_hpp" title="Header &lt;contract/constructor.hpp&gt;">
<link rel="prev" href="../CONTRACT_CONFIG_MAX_MULTIPLE_INHERITANCE.html" title="Macro CONTRACT_CONFIG_MAX_MULTIPLE_INHERITANCE">
<link rel="next" href="../CONTRACT_CHECK_BLOCK_INVARIANT.html" title="Macro CONTRACT_CHECK_BLOCK_INVARIANT">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="spirit-nav">
<a accesskey="p" href="../CONTRACT_CONFIG_MAX_MULTIPLE_INHERITANCE.html"><img src=".././doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../reference.html#header..home.lcaminiti.sandbox.dbcpp_sourceforge.boost-quickbook.doc.qbk.src.contract.constructor_hpp"><img src=".././doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src=".././doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="../CONTRACT_CHECK_BLOCK_INVARIANT.html"><img src=".././doc/html/images/next.png" alt="Next"></a>
</div>
<hr>
<div class="refentry" lang="en">
<a name="contract.constructor"></a><div class="titlepage"></div>
<div class="refnamediv">
<h2><span class="refentrytitle">Class template constructor</span></h2>
<p>contract::constructor</p>
</div>
<h2 xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="refsynopsisdiv-title">Synopsis</h2>
<div xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="refsynopsisdiv"><pre class="synopsis"><span class="emphasis"><em>// In header: &lt;<a class="link" href="../reference.html#header..home.lcaminiti.sandbox.dbcpp_sourceforge.boost-quickbook.doc.qbk.src.contract.constructor_hpp" title="Header &lt;contract/constructor.hpp&gt;">contract/constructor.hpp</a>&gt;

</em></span><span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> F&gt; 
<span class="bold"><strong>class</strong></span> <a class="link" href="constructor.html" title="Class template constructor">constructor</a> : <span class="bold"><strong>public</strong></span> contract::nonstatic_member_function&lt; F &gt; {
<span class="bold"><strong>public</strong></span>:
  <span class="emphasis"><em>// <a class="link" href="constructor.html#contract.constructorconstruct-copy-destruct">construct/copy/destruct</a></em></span>
  <a class="link" href="constructor.html#id2352644-bb">constructor</a>(__BodyFunctionPointer__, __PreconditionFunctionPointer__, 
              __PostconditionFunctionPointer__);
  <a class="link" href="constructor.html#id2352831-bb">~constructor</a>();

  <span class="emphasis"><em>// <a class="link" href="constructor.html#id2352584-bb">public member functions</a></em></span>
  <span class="type"><span class="bold"><strong>void</strong></span></span> <a class="link" href="constructor.html#id2352587-bb">call</a>(__MaybeCvClassPointer__, ArgumentType1, ..., ArgumetnTypeN) ;
};</pre></div>
<div class="refsect1" lang="en">
<a name="id2661510"></a><h2>Description</h2>
<p>Class template used to write contracts for constructors.</p>
<p><span class="bold"><strong>Note:</strong></span> Only the differences between this class and the <code class="computeroutput">contract::nonstatic_member_function</code> class are documented here. Read the <code class="computeroutput">contract::nonstatic_member_function</code> documentation first.</p>
<p>The <code class="computeroutput">CONTRACT_CONSTRUCTOR()</code> macro expands to code that uses this class template (see the Without the Macros section) -- whenever possible, use the macro instead of using this class template directly. Rarely, it might be needed to use this class template directly to implement workarounds for compilers that do not fully comply with the ISO C++ standard.</p>
<p><span class="bold"><strong>Parameters:</strong></span> </p>
<div class="informaltable"><table class="table">
<colgroup>
<col>
<col>
</colgroup>
<tbody><tr>
<td><span class="bold"><strong><code class="computeroutput">F</code></strong></span></td>
<td>The function type of the constructor function being contracted. </td>
</tr></tbody>
</table></div>
<p>
</p>
<p>Base contract classes cannot be specified because constructors do not directly subcontract (C++ object construction mechanism will automatically invoke base class contracts when they are present).</p>
<p>The function type <code class="computeroutput">F</code> must be specified as follows: </p>
<pre class="programlisting">    void (ClassType*, ArgumentType1, ..., ArgumentTypeN)
</pre>
<p> Note: </p>
<div class="itemizedlist"><ul type="disc">
<li><p>The result type is always <code class="computeroutput">void</code> because constructors return no value. </p></li>
<li><p><code class="computeroutput">ClassType</code> is never <code class="computeroutput">const</code> because constructors can never be constant members (as they modify the object by constructing it). </p></li>
<li><p><code class="computeroutput">ClassType</code> cannot be tagged <code class="computeroutput">contract::copyable</code> because there is no object before constructor body execution (it has not been constructed yet) -- the library will generate a compile-time error otherwise.</p></li>
</ul></div>
<p>
<span class="bold"><strong>See:</strong></span> Without the Macros section, <code class="computeroutput">contract::nonstatic_member_function</code> </p>
<div class="refsect2" lang="en">
<a name="id2661663"></a><h3>
<a name="contract.constructorconstruct-copy-destruct"></a><code class="computeroutput">constructor</code> 
        public
       construct/copy/destruct</h3>
<div class="orderedlist"><ol type="1">
<li>
<pre class="literallayout"><a name="id2352644-bb"></a>constructor(__BodyFunctionPointer__ body_function, 
            __PreconditionFunctionPointer__ precondition_function, 
            __PostconditionFunctionPointer__ postcondition_function);</pre>
<p>Construct this contract object using the specified body, preconditions, and postconditions functions.</p>
<p><span class="bold"><strong>Parameters:</strong></span> </p>
<div class="informaltable"><table class="table">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td><span class="bold"><strong><code class="computeroutput">body_function</code></strong></span></td>
<td>A pointer to the function executing the body. </td>
</tr>
<tr>
<td><span class="bold"><strong><code class="computeroutput">precondition_function</code></strong></span></td>
<td>A pointer to the function asserting the preconditions. </td>
</tr>
<tr>
<td><span class="bold"><strong><code class="computeroutput">postcondition_function</code></strong></span></td>
<td>A pointer to the function asserting the postconditions. </td>
</tr>
</tbody>
</table></div>
<p>
</p>
<p>Refer to the <code class="computeroutput">contract::nonstatic_member_function</code> documentation for the definition of metaprogramming constructs used below (<code class="computeroutput">__IfCopyable__</code>, etc).</p>
<p>The body function pointer type is defined as follows: </p>
<pre class="programlisting">        typedef void (ClassType::* __BodyFunctionPointer__)
                (   __RemoveCopyable__&lt; ArgumentType1 &gt;,
                    ..., 
                    __RemoveCopyable__&lt; ArgumentTypeN &gt;
                );
</pre>
<p>The precondition function pointer type is defined as follows: </p>
<pre class="programlisting">        typedef void (* __PreconditionFunctionPointer__)
                (   boost::add_reference&lt;boost::add_const&lt;
                            __RemoveCopyable__&lt; ArgumentType1 &gt; &gt;::type&gt;::type,
                    ..., 
                    boost::add_reference&lt;boost::add_const&lt;
                            __RemoveCopyable__&lt; ArgumentTypeN &gt; &gt;::type&gt;::type
                );
</pre>
<p> </p>
<div class="itemizedlist"><ul type="disc">
<li><p>This is a <span class="bold"><strong>static</strong></span> member function (because is does not specify the class type using <code class="computeroutput">(*)</code> instead of <code class="computeroutput">(ClassType::*)</code>). This ensures that constructor preconditions do not access the object (as before constructor body no object has been constructed yet). </p></li>
<li><p>The precondition function is never <code class="computeroutput">const</code> (because is must be <code class="computeroutput">static</code>).</p></li>
</ul></div>
<p>
The postcondition function pointer type is defined as follows: </p>
<pre class="programlisting">        typedef void (ClassType::* __PreconditionFunctionPointer__)
                (   contract::noold,
                    boost::add_reference&lt;boost::add_const&lt;
                            __RemoveCopyable__&lt; ArgumentType1 &gt; &gt;::type&gt;::type,
                    __IfCopyable__&lt; ArgumentType1,
                            boost::add_reference&lt;boost::add_const&lt;
                            __RemoveCopyable__&lt; ArgumentType1 &gt; &gt;::type&gt;::type &gt;,
                    ..., 
                    boost::add_reference&lt;boost::add_const&lt;
                            __RemoveCopyable__&lt; ArgumentTypeN &gt; &gt;::type&gt;::type,
                    __IfCopyable__&lt; ArgumentTypeN,
                            boost::add_reference&lt;boost::add_const&lt;
                            __RemoveCopyable__&lt; ArgumentTypeN &gt; &gt;::type&gt;::type &gt;
                ) const;
</pre>
<p> </p>
<div class="itemizedlist"><ul type="disc"><li><p>The old object value is never available (it is always of type <code class="computeroutput">contract::noold</code>). This ensure that constructor postconditions never access the object old value (as there was no object before constructor body execution). </p></li></ul></div>
<p>
</p>
</li>
<li>
<pre class="literallayout"><a name="id2352831-bb"></a>~constructor();</pre>
<p>Destroy this contract object. </p>
</li>
</ol></div>
</div>
<div class="refsect2" lang="en">
<a name="id2661924"></a><h3>
<a name="id2352584-bb"></a><code class="computeroutput">constructor</code> public member functions</h3>
<div class="orderedlist"><ol type="1"><li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>void</strong></span></span> <a name="id2352587-bb"></a>call(__MaybeCvClassPointer__ object, ArgumentType1 argument1, ..., 
          ArgumetnTypeN argumentN) ;</pre>
<p>Check the contract and executes the member function body.</p>
<p>Refer to the <code class="computeroutput">contract::nonstatic_member_function</code> documentation.</p>
<p>Accordingly with <code class="computeroutput">F</code>, the <code class="computeroutput">call()</code> function always returns <code class="computeroutput">void</code>. </p>
</li></ol></div>
</div>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright © 2009 -2010 Lorenzo Caminiti<p>
        Distributed under the Contract++ Software License, Version 1.0 (see accompanying
        file LICENSE_1_0.txt)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../CONTRACT_CONFIG_MAX_MULTIPLE_INHERITANCE.html"><img src=".././doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../reference.html#header..home.lcaminiti.sandbox.dbcpp_sourceforge.boost-quickbook.doc.qbk.src.contract.constructor_hpp"><img src=".././doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src=".././doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="../CONTRACT_CHECK_BLOCK_INVARIANT.html"><img src=".././doc/html/images/next.png" alt="Next"></a>
</div>
</body>
</html>
